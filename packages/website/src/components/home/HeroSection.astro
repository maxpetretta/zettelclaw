---
const nodes = [
  { cx: 85, cy: 78, r: 5, d: 0, color: "coral" },
  { cx: 210, cy: 145, r: 7, d: 0.8, color: "violet" },
  { cx: 350, cy: 85, r: 6, d: 1.5, color: "coral" },
  { cx: 480, cy: 190, r: 8, d: 0.3, color: "violet" },
  { cx: 620, cy: 105, r: 5.5, d: 2.1, color: "coral" },
  { cx: 750, cy: 210, r: 7, d: 1.1, color: "violet" },
  { cx: 890, cy: 130, r: 6, d: 0.6, color: "coral" },
  { cx: 1020, cy: 200, r: 5, d: 1.8, color: "violet" },
  { cx: 1130, cy: 95, r: 6.5, d: 2.4, color: "coral" },
  { cx: 150, cy: 290, r: 6, d: 1.3, color: "violet" },
  { cx: 310, cy: 340, r: 5, d: 0.5, color: "coral" },
  { cx: 500, cy: 380, r: 7.5, d: 1.9, color: "violet" },
  { cx: 680, cy: 350, r: 6, d: 0.2, color: "coral" },
  { cx: 830, cy: 400, r: 5.5, d: 2.6, color: "violet" },
  { cx: 970, cy: 340, r: 7, d: 1.4, color: "coral" },
  { cx: 1100, cy: 380, r: 5, d: 0.9, color: "violet" },
  { cx: 260, cy: 470, r: 6, d: 2, color: "coral" },
  { cx: 440, cy: 520, r: 5, d: 0.7, color: "violet" },
  { cx: 640, cy: 490, r: 7, d: 1.6, color: "coral" },
  { cx: 820, cy: 540, r: 6, d: 2.3, color: "violet" },
  { cx: 1000, cy: 480, r: 5.5, d: 1, color: "coral" },
  { cx: 60, cy: 450, r: 4, d: 1.7, color: "violet" },
  { cx: 1150, cy: 520, r: 4.5, d: 0.4, color: "coral" },
]

const edges: Array<[number, number]> = [
  [0, 1],
  [1, 2],
  [1, 3],
  [2, 4],
  [3, 5],
  [4, 5],
  [4, 6],
  [5, 7],
  [6, 8],
  [7, 8],
  [0, 9],
  [1, 9],
  [9, 10],
  [3, 10],
  [3, 11],
  [10, 11],
  [11, 12],
  [5, 12],
  [12, 13],
  [7, 14],
  [13, 14],
  [14, 15],
  [8, 15],
  [9, 16],
  [10, 16],
  [16, 17],
  [11, 17],
  [17, 18],
  [12, 18],
  [18, 19],
  [13, 19],
  [19, 20],
  [14, 20],
  [15, 20],
  [21, 9],
  [21, 16],
  [20, 22],
  [15, 22],
]
---

<section class="hero-section relative overflow-hidden md:mx-5 lg:mx-auto md:max-w-5xl md:mt-6 md:rounded-2xl md:border md:border-border reveal">
  <div class="hero-graph" aria-hidden="true">
    <svg viewBox="0 0 1200 620" preserveAspectRatio="xMidYMid slice" role="presentation" focusable="false">
      <defs>
        <radialGradient id="glow-coral" cx="50%" cy="50%" r="50%">
          <stop offset="0%" stop-color="var(--brand)" stop-opacity="0.9" />
          <stop offset="100%" stop-color="var(--brand)" stop-opacity="0" />
        </radialGradient>
        <radialGradient id="glow-violet" cx="50%" cy="50%" r="50%">
          <stop offset="0%" stop-color="#7c3aed" stop-opacity="0.9" />
          <stop offset="100%" stop-color="#7c3aed" stop-opacity="0" />
        </radialGradient>
        <filter id="edge-blur">
          <feGaussianBlur stdDeviation="0.8" />
        </filter>
      </defs>

      <g class="graph-edges">
        {edges.map(([a, b], index) => {
          const sourceNode = nodes[a]
          const targetNode = nodes[b]

          if (!(sourceNode && targetNode)) {
            return null
          }

          return (
            <line
              x1={sourceNode.cx}
              y1={sourceNode.cy}
              x2={targetNode.cx}
              y2={targetNode.cy}
              style={`--edge-d: ${(index * 0.4) % 3}s`}
            />
          )
        })}
      </g>

      <g class="graph-halos">
        {nodes.map((node) => (
          <circle
            cx={node.cx}
            cy={node.cy}
            r={node.r * 4}
            fill={node.color === "coral" ? "url(#glow-coral)" : "url(#glow-violet)"}
            style={`--d: ${node.d}s`}
            class="halo"
          />
        ))}
      </g>

      <g class="graph-nodes">
        {nodes.map((node) => (
          <circle cx={node.cx} cy={node.cy} r={node.r} class={`node node-${node.color}`} style={`--d: ${node.d}s`} />
        ))}
      </g>
    </svg>
  </div>

  <div class="hero-scanlines" aria-hidden="true"></div>

  <div class="relative z-10 px-6 pt-24 pb-16 md:px-10 md:pt-48 md:pb-24">
    <p class="font-mono text-[8px] sm:text-xs tracking-[0.2em] uppercase text-brand mb-5 inline-flex items-center gap-2 rounded-full border border-brand/40 bg-brand-soft px-3.5 py-1.5 backdrop-blur-sm">
      <span aria-hidden="true">ðŸ¦ž</span>
      Agent-native PKM for Obsidian + OpenClaw
    </p>

    <h1 class="hero-heading font-extrabold tracking-tighter leading-none text-foreground">
      <span class="whitespace-nowrap">Conversations fade.</span><br />
      <span class="hero-accent whitespace-nowrap">Knowledge compounds.</span>
    </h1>

    <p class="mt-8 text-lg md:text-xl text-[#C8CDDF] max-w-xl leading-relaxed">
      Zettelclaw creates a dedicated Obsidian vault as your AI agent's memory system &mdash; replacing ephemeral chat history with evergreen notes that compound over time.
    </p>

    <div class="mt-10 flex flex-wrap gap-3">
      <a
        href="https://github.com/maxpetretta/zettelclaw"
        class="inline-flex items-center px-5 py-2.5 bg-brand text-white font-semibold text-sm rounded-lg hover:brightness-110 transition-all hover:-translate-y-0.5 active:translate-y-0 shadow-lg shadow-brand/30"
      >
        View on GitHub
      </a>
      <a
        href="#start"
        class="inline-flex items-center px-5 py-2.5 border border-border text-foreground font-semibold text-sm rounded-lg hover:bg-card transition-all hover:-translate-y-0.5 active:translate-y-0 backdrop-blur-sm"
      >
        Get started
      </a>
    </div>
  </div>

  <aside class="hero-marginalia" aria-hidden="true">
    <span class="font-mono text-xs text-violet-400 tracking-wide">cf. Luhmann, 1992</span>
    <span class="text-sm italic text-muted-foreground leading-relaxed border-l-2 border-violet-500/30 pl-2.5"
      >"One cannot think without writing"</span
    >
  </aside>
</section>

<style>
  .hero-section {
    min-height: clamp(480px, 68vh, 620px);
    background:
      radial-gradient(ellipse 60% 50% at 70% 30%, rgba(124, 58, 237, 0.14) 0%, transparent 70%),
      radial-gradient(ellipse 40% 60% at 20% 70%, rgba(255, 107, 53, 0.08) 0%, transparent 70%),
      linear-gradient(160deg, rgba(20, 18, 30, 0.9) 0%, rgba(11, 15, 20, 0.95) 100%);
    box-shadow:
      0 0 0 1px rgba(255, 255, 255, 0.03) inset,
      0 40px 80px -20px rgba(0, 0, 0, 0.6),
      0 0 120px -40px rgba(124, 58, 237, 0.15);
  }

  .hero-heading {
    font-size: clamp(1.75rem, 6.5vw, 5rem);
  }

  .hero-accent {
    background: linear-gradient(135deg, var(--brand) 20%, #ff9f6b 50%, #7c3aed 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .hero-graph {
    position: absolute;
    inset: 0;
    z-index: 0;
  }

  .hero-graph svg {
    width: 100%;
    height: 100%;
  }

  .graph-edges line {
    stroke: rgba(124, 58, 237, 0.25);
    stroke-width: 1;
    stroke-linecap: round;
    stroke-dasharray: 6 10;
    animation: edge-travel 6s linear infinite;
    animation-delay: var(--edge-d);
    filter: url(#edge-blur);
  }

  .graph-edges line:nth-child(odd) {
    stroke: rgba(255, 107, 53, 0.2);
    animation-duration: 8s;
    stroke-dasharray: 4 12;
  }

  .graph-edges line:nth-child(3n) {
    stroke: rgba(255, 255, 255, 0.08);
    animation-duration: 10s;
  }

  .halo {
    opacity: 0.3;
    animation: halo-breathe 5s ease-in-out infinite;
    animation-delay: var(--d);
  }

  .node {
    animation: node-pulse 4s ease-in-out infinite;
    animation-delay: var(--d);
  }

  .node-coral {
    fill: var(--brand);
  }

  .node-violet {
    fill: #7c3aed;
  }

  .hero-scanlines {
    position: absolute;
    inset: 0;
    z-index: 1;
    background: repeating-linear-gradient(
      0deg,
      transparent 0px,
      transparent 2px,
      rgba(0, 0, 0, 0.03) 2px,
      rgba(0, 0, 0, 0.03) 4px
    );
    pointer-events: none;
  }

  .hero-marginalia {
    position: absolute;
    right: 2rem;
    top: 2.5rem;
    z-index: 10;
    display: none;
    flex-direction: column;
    gap: 0.35rem;
    max-width: 180px;
    opacity: 0.4;
    transition: opacity 300ms ease;
  }

  .hero-section:hover .hero-marginalia {
    opacity: 0.65;
  }

  @keyframes edge-travel {
    from {
      stroke-dashoffset: 0;
    }

    to {
      stroke-dashoffset: -48;
    }
  }

  @keyframes node-pulse {
    0%,
    100% {
      opacity: 0.6;
    }

    50% {
      opacity: 1;
    }
  }

  @keyframes halo-breathe {
    0%,
    100% {
      opacity: 0.15;
      transform: scale(0.8);
    }

    50% {
      opacity: 0.4;
      transform: scale(1.2);
    }
  }

  @media (max-width: 767px) {
    .hero-section {
      -webkit-mask-image: linear-gradient(to bottom, black 0%, black 85%, transparent 100%);
      mask-image: linear-gradient(to bottom, black 0%, black 85%, transparent 100%);
      box-shadow: none;
    }
  }

  @media (min-width: 860px) {
    .hero-marginalia {
      display: flex;
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .graph-edges line,
    .graph-nodes .node,
    .halo {
      animation: none !important;
    }
  }
</style>
