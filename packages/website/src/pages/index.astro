---
import Layout from "@/layouts/Layout.astro"

type GraphNode = {
  cx: number
  cy: number
  r: number
  d: number
  color: "coral" | "violet"
}

const steps = [
  {
    icon: "üõ†Ô∏è",
    number: "01",
    title: "Init",
    description:
      "Run one command and Zettelclaw creates a brand-new vault that becomes your AI agent memory system.",
    wikilink: "[[Init]]",
  },
  {
    icon: "üí¨",
    number: "02",
    title: "Converse",
    description:
      "Chat in OpenClaw while your new vault stays in sync as the durable knowledge layer for human and agent collaboration.",
    wikilink: "[[Conversation]]",
  },
  {
    icon: "üß†",
    number: "03",
    title: "Compound",
    description:
      "Knowledge extraction runs automatically through /new captures, hooks, and heartbeat cycles so memory keeps growing in the background.",
    wikilink: "[[Automatic Extraction]]",
  },
]

const features = [
  {
    wikilink: "[[Atomic Notes]]",
    title: "Atomic Notes",
    description:
      "Capture one idea per note so knowledge remains reusable, composable, and easy for agents to reason over.",
  },
  {
    wikilink: "[[Journal Extraction]]",
    title: "Journal Extraction",
    description: "Promote raw daily reflections into lasting notes without losing provenance.",
  },
  {
    wikilink: "[[Vault Search]]",
    title: "Vault Search",
    description: "Find and surface linked context quickly across your entire graph of notes.",
  },
  {
    wikilink: "[[OpenClaw Integration]]",
    title: "OpenClaw Integration",
    description: "Built to work directly with OpenClaw workflows and agent-native collaboration.",
  },
  {
    wikilink: "[[Obsidian Native]]",
    title: "Obsidian Native",
    description: "No lock-in: plain markdown files in your vault with your existing plugin ecosystem.",
  },
  {
    wikilink: "[[Open Source]]",
    title: "Open Source",
    description: "Inspect, extend, and adapt the system to your own workflows and team knowledge conventions.",
  },
]

const nodes: GraphNode[] = [
  { cx: 85, cy: 78, r: 5, d: 0, color: "coral" },
  { cx: 210, cy: 145, r: 7, d: 0.8, color: "violet" },
  { cx: 350, cy: 85, r: 6, d: 1.5, color: "coral" },
  { cx: 480, cy: 190, r: 8, d: 0.3, color: "violet" },
  { cx: 620, cy: 105, r: 5.5, d: 2.1, color: "coral" },
  { cx: 750, cy: 210, r: 7, d: 1.1, color: "violet" },
  { cx: 890, cy: 130, r: 6, d: 0.6, color: "coral" },
  { cx: 1020, cy: 200, r: 5, d: 1.8, color: "violet" },
  { cx: 1130, cy: 95, r: 6.5, d: 2.4, color: "coral" },
  { cx: 150, cy: 290, r: 6, d: 1.3, color: "violet" },
  { cx: 310, cy: 340, r: 5, d: 0.5, color: "coral" },
  { cx: 500, cy: 380, r: 7.5, d: 1.9, color: "violet" },
  { cx: 680, cy: 350, r: 6, d: 0.2, color: "coral" },
  { cx: 830, cy: 400, r: 5.5, d: 2.6, color: "violet" },
  { cx: 970, cy: 340, r: 7, d: 1.4, color: "coral" },
  { cx: 1100, cy: 380, r: 5, d: 0.9, color: "violet" },
  { cx: 260, cy: 470, r: 6, d: 2.0, color: "coral" },
  { cx: 440, cy: 520, r: 5, d: 0.7, color: "violet" },
  { cx: 640, cy: 490, r: 7, d: 1.6, color: "coral" },
  { cx: 820, cy: 540, r: 6, d: 2.3, color: "violet" },
  { cx: 1000, cy: 480, r: 5.5, d: 1.0, color: "coral" },
  { cx: 60, cy: 450, r: 4, d: 1.7, color: "violet" },
  { cx: 1150, cy: 520, r: 4.5, d: 0.4, color: "coral" },
]

const edges: [number, number][] = [
  [0, 1], [1, 2], [1, 3], [2, 4], [3, 5], [4, 5], [4, 6],
  [5, 7], [6, 8], [7, 8], [0, 9], [1, 9], [9, 10], [3, 10],
  [3, 11], [10, 11], [11, 12], [5, 12], [12, 13], [7, 14],
  [13, 14], [14, 15], [8, 15], [9, 16], [10, 16], [16, 17],
  [11, 17], [17, 18], [12, 18], [18, 19], [13, 19], [19, 20],
  [14, 20], [15, 20], [21, 9], [21, 16], [20, 22], [15, 22],
]
---

<Layout>
  <header class="sticky top-0 z-50 backdrop-blur-xl bg-background/80 border-b border-border">
    <div class="max-w-5xl mx-auto px-5 h-14 flex items-center justify-between">
      <a href="#top" class="flex items-center gap-2 text-foreground font-semibold text-sm">
        <span>ü¶û</span>
        <span>Zettelclaw</span>
      </a>
      <nav class="hidden md:flex items-center gap-8 text-sm text-muted-foreground">
        <a href="#how" class="hover:text-foreground transition-colors">How it works</a>
        <a href="#features" class="hover:text-foreground transition-colors">Features</a>
        <a href="#start" class="hover:text-foreground transition-colors">Get started</a>
      </nav>
      <a
        href="https://github.com/maxpetretta/zettelclaw"
        class="text-sm font-medium text-muted-foreground hover:text-foreground transition-colors"
      >
        GitHub &rarr;
      </a>
    </div>
  </header>

  <main id="top" class="max-w-5xl mx-auto px-5">
    <section class="pt-20 pb-16 md:pt-28 md:pb-24 reveal">
      <div class="hero-shell">
        <div class="hero-graph" aria-hidden="true">
          <svg viewBox="0 0 1200 620" preserveAspectRatio="xMidYMid slice" role="presentation" focusable="false">
            <defs>
              <radialGradient id="glow-coral" cx="50%" cy="50%" r="50%">
                <stop offset="0%" stop-color="#FF6B35" stop-opacity="0.9" />
                <stop offset="100%" stop-color="#FF6B35" stop-opacity="0" />
              </radialGradient>
              <radialGradient id="glow-violet" cx="50%" cy="50%" r="50%">
                <stop offset="0%" stop-color="#7C3AED" stop-opacity="0.9" />
                <stop offset="100%" stop-color="#7C3AED" stop-opacity="0" />
              </radialGradient>
              <filter id="edge-blur">
                <feGaussianBlur stdDeviation="0.8" />
              </filter>
            </defs>

            <g class="graph-edges">
              {edges.map(([a, b], i) => (
                <line
                  x1={nodes[a]!.cx} y1={nodes[a]!.cy}
                  x2={nodes[b]!.cx} y2={nodes[b]!.cy}
                  style={`--edge-d: ${(i * 0.4) % 3}s`}
                />
              ))}
            </g>

            <g class="graph-halos">
              {nodes.map((n) => (
                <circle
                  cx={n.cx}
                  cy={n.cy}
                  r={n.r * 4}
                  fill={n.color === "coral" ? "url(#glow-coral)" : "url(#glow-violet)"}
                  style={`--d: ${n.d}s`}
                  class="halo"
                />
              ))}
            </g>

            <g class="graph-nodes">
              {nodes.map((n) => (
                <circle
                  cx={n.cx}
                  cy={n.cy}
                  r={n.r}
                  class={`node node-${n.color}`}
                  style={`--d: ${n.d}s`}
                />
              ))}
            </g>
          </svg>
        </div>

        <div class="hero-scanlines" aria-hidden="true"></div>

        <div class="hero-content">
          <p class="font-mono text-xs tracking-[0.2em] uppercase text-brand mb-5">
            Open-source PKM for AI agents
          </p>
          <h1 class="hero-heading font-extrabold tracking-tighter leading-none text-foreground">
            Conversations fade.<br />
            <span class="text-brand">Knowledge compounds.</span>
          </h1>
          <p class="mt-7 text-lg md:text-xl text-muted-foreground max-w-2xl leading-relaxed">
            Zettelclaw creates a new vault that becomes your AI agent memory system, replacing OpenClaw&apos;s default memory entirely.
            Knowledge flows into that vault automatically through <code>/new</code>, automatic hooks, and heartbeat cycles.
          </p>
          <div class="mt-10 flex flex-wrap gap-3">
            <a
              href="https://github.com/maxpetretta/zettelclaw"
              class="inline-flex items-center px-5 py-2.5 bg-brand text-white font-semibold text-sm rounded-lg hover:brightness-110 transition-all hover:-translate-y-0.5 active:translate-y-0"
            >
              View on GitHub
            </a>
            <a
              href="#start"
              class="inline-flex items-center px-5 py-2.5 border border-border text-foreground font-semibold text-sm rounded-lg hover:bg-card transition-all hover:-translate-y-0.5 active:translate-y-0"
            >
              Get started
            </a>
          </div>
        </div>
      </div>
    </section>

    <section class="pb-20" id="demo">
      <p class="font-mono text-xs tracking-[0.2em] uppercase text-brand mb-4 reveal">
        See it in action
      </p>
      <h2 class="text-2xl md:text-3xl font-bold tracking-tight text-foreground mb-10 reveal">
        Knowledge capture stays automatic
      </h2>

      <div class="grid md:grid-cols-[1fr_auto_1fr] gap-6 md:gap-8 items-start reveal">
        <div class="rounded-xl border border-border bg-card p-5 shadow-2xl shadow-black/30">
          <div class="flex items-center gap-2 text-xs text-muted-foreground font-mono mb-4">
            <span class="w-2 h-2 rounded-full bg-emerald-500 shrink-0"></span>
            Conversation
          </div>
          <div class="space-y-3">
            <div class="rounded-lg bg-muted px-4 py-3 text-sm text-foreground/90 leading-relaxed">
              I&apos;m comparing Virtual DOM strategies and compiler-first rendering. What tradeoffs matter most at scale?
            </div>
            <div class="rounded-lg bg-brand-soft border border-brand/20 px-4 py-3 text-sm text-foreground/90 leading-relaxed">
              Building on <span class="font-mono text-xs text-violet-400">[[Frontend Architecture]]</span>, Virtual DOM improves developer ergonomics but may trade memory for diff flexibility in highly dynamic trees...
            </div>
            <div class="flex flex-wrap items-center gap-2 pt-2 text-xs text-muted-foreground">
              <code class="font-mono text-xs bg-violet-500/15 text-violet-400 px-2 py-1 rounded">/new</code>
              <span>automatic hooks</span>
              <span class="text-brand">‚Ä¢</span>
              <span>heartbeat cycles</span>
            </div>
          </div>
        </div>

        <div class="hidden md:flex items-center self-center">
          <span class="demo-arrow text-brand text-2xl font-bold select-none" aria-hidden="true">&rarr;</span>
        </div>
        <div class="flex md:hidden justify-center -my-2">
          <span class="demo-arrow text-brand text-2xl font-bold select-none" aria-hidden="true">&darr;</span>
        </div>

        <div class="rounded-xl border border-border bg-card p-5 shadow-2xl shadow-black/30">
          <div class="flex items-center gap-2 text-xs text-muted-foreground font-mono mb-4">
            <span class="w-2 h-2 rounded-full bg-brand shrink-0"></span>
            Extracted Notes
          </div>
          <div class="space-y-3">
            <div class="note-card note-card-brand">
              <p class="font-mono text-xs text-muted-foreground mb-1.5">React Virtual Dom Trades Memory For Speed.md</p>
              <p class="text-sm text-foreground/90 leading-relaxed">
                Virtual DOM can improve maintainability while adding memory overhead in large interactive interfaces.
              </p>
              <div class="flex flex-wrap gap-2 mt-2">
                <span class="font-mono text-xs text-violet-400">[[Frontend Architecture]]</span>
                <span class="font-mono text-xs text-violet-400">[[Render Performance]]</span>
              </div>
            </div>
            <div class="note-card note-card-violet">
              <p class="font-mono text-xs text-muted-foreground mb-1.5">Compiler First Rendering Optimizes Static Paths.md</p>
              <p class="text-sm text-foreground/90 leading-relaxed">
                Compiler-led rendering can cut runtime diff costs by moving predictable work out of the hot path.
              </p>
              <div class="flex flex-wrap gap-2 mt-2">
                <span class="font-mono text-xs text-violet-400">[[Render Performance]]</span>
                <span class="font-mono text-xs text-violet-400">[[Build Time Tradeoffs]]</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <p class="mt-6 text-sm text-muted-foreground leading-relaxed max-w-3xl reveal">
        Extraction is not manual upkeep. Zettelclaw continuously compounds memory through explicit <code>/new</code> captures,
        automatic hooks, and heartbeat cycles.
      </p>
    </section>

    <section class="py-20" id="how">
      <p class="font-mono text-xs tracking-[0.2em] uppercase text-brand mb-4 reveal">
        How it works
      </p>
      <h2 class="text-2xl md:text-3xl font-bold tracking-tight text-foreground mb-4 reveal">
        Three steps to a living vault
      </h2>
      <p class="text-muted-foreground leading-relaxed max-w-3xl mb-4 reveal">
        Zettelclaw applies Zettelkasten principles: atomic notes, emergent structure, and links over folders.
        It creates a dedicated vault that replaces OpenClaw&apos;s default memory system so your agent memory is durable,
        inspectable markdown from day one.
      </p>
      <div class="flex flex-wrap items-center gap-2 text-sm text-muted-foreground mb-12 reveal">
        <span>conversation</span>
        <span class="text-brand font-bold">&rarr;</span>
        <code class="font-mono text-xs bg-violet-500/15 text-violet-400 px-2 py-0.5 rounded">/new</code>
        <span class="text-brand font-bold">&rarr;</span>
        <span>hooks + heartbeat cycles</span>
        <span class="text-brand font-bold">&rarr;</span>
        <span>atomic notes in your vault</span>
      </div>

      <div class="grid md:grid-cols-3 gap-8">
        {steps.map((step) => (
          <article class="step-card reveal">
            <div class="flex items-baseline gap-3 mb-3">
              <span class="font-mono text-xs text-muted-foreground/40 select-none">{step.number}</span>
              <span class="text-xl">{step.icon}</span>
            </div>
            <h3 class="font-bold text-foreground mb-1.5">{step.title}</h3>
            <p class="text-sm text-muted-foreground leading-relaxed">{step.description}</p>
            <span class="font-mono text-xs text-violet-400 mt-3 inline-block">{step.wikilink}</span>
          </article>
        ))}
      </div>
    </section>

    <section class="py-20" id="features">
      <p class="font-mono text-xs tracking-[0.2em] uppercase text-brand mb-4 reveal">
        Capabilities
      </p>
      <h2 class="text-2xl md:text-3xl font-bold tracking-tight text-foreground mb-10 reveal">
        Everything your vault needs
      </h2>

      <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-px bg-border rounded-xl overflow-hidden reveal">
        {features.map((feature) => (
          <div class="bg-background p-6 hover:bg-card transition-colors">
            <span class="font-mono text-xs text-violet-400 block mb-3">{feature.wikilink}</span>
            <h3 class="font-bold text-foreground text-sm mb-1.5">{feature.title}</h3>
            <p class="text-sm text-muted-foreground leading-relaxed">{feature.description}</p>
          </div>
        ))}
      </div>
    </section>

    <section class="py-20" id="start">
      <p class="font-mono text-xs tracking-[0.2em] uppercase text-brand mb-4 reveal">
        Get started
      </p>
      <h2 class="text-2xl md:text-3xl font-bold tracking-tight text-foreground mb-6 reveal">
        One command away
      </h2>

      <div class="max-w-lg mx-auto reveal">
        <div class="rounded-xl overflow-hidden border border-border bg-card shadow-2xl shadow-black/40">
          <div class="flex items-center gap-1.5 px-4 py-3 border-b border-border bg-muted">
            <span class="w-3 h-3 rounded-full bg-[#ff5f57]"></span>
            <span class="w-3 h-3 rounded-full bg-[#ffbd2e]"></span>
            <span class="w-3 h-3 rounded-full bg-[#28c840]"></span>
            <span class="text-xs text-muted-foreground mx-auto -translate-x-4">Terminal</span>
          </div>
          <div class="p-5 font-mono text-sm">
            <div class="flex items-center justify-center">
              <span class="text-brand select-none mr-2">$</span>
              <span class="text-foreground">npx zettelclaw init</span>
              <span class="typing-cursor"></span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="pb-20 reveal" aria-label="Reclaw callout">
      <div class="reclaw-callout rounded-2xl border border-brand/30 bg-brand-soft/40 p-6 md:p-8">
        <p class="text-base md:text-lg text-foreground leading-relaxed">
          Already have AI chat history? Bootstrap your Zettelclaw with existing memories from ChatGPT, Claude, Grok, and more at
          <a href="https://reclaw.sh" class="text-brand font-semibold hover:underline">reclaw.sh</a>
        </p>
      </div>
    </section>
  </main>

  <footer class="border-t border-border mt-10 py-8">
    <div class="max-w-5xl mx-auto px-5 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4">
      <p class="text-sm text-muted-foreground">Built with ü¶û by the OpenClaw community</p>
      <div class="flex gap-5 text-sm">
        <a
          href="https://github.com/maxpetretta/zettelclaw"
          class="text-muted-foreground hover:text-foreground transition-colors"
          >GitHub</a
        >
        <a
          href="https://www.npmjs.com/package/zettelclaw"
          class="text-muted-foreground hover:text-foreground transition-colors"
          >npm</a
        >
      </div>
    </div>
  </footer>
</Layout>

<style>
  .hero-shell {
    position: relative;
    overflow: hidden;
    border-radius: 1.25rem;
    border: 1px solid rgba(255, 255, 255, 0.14);
    min-height: clamp(29rem, 66vh, 38rem);
    box-shadow:
      0 30px 70px -30px rgba(0, 0, 0, 0.75),
      0 0 120px -60px rgba(124, 58, 237, 0.5),
      inset 0 1px 0 rgba(255, 255, 255, 0.12);
    background:
      radial-gradient(ellipse 60% 50% at 70% 22%, rgba(124, 58, 237, 0.2) 0%, transparent 70%),
      radial-gradient(ellipse 40% 60% at 10% 75%, rgba(255, 107, 53, 0.16) 0%, transparent 70%),
      linear-gradient(162deg, rgba(19, 24, 39, 0.95), rgba(11, 15, 20, 0.96));
  }

  .hero-graph {
    position: absolute;
    inset: 0;
    z-index: 0;
    opacity: 0.95;
  }

  .hero-graph svg {
    width: 100%;
    height: 100%;
  }

  .graph-edges line {
    stroke: rgba(124, 58, 237, 0.3);
    stroke-width: 1;
    stroke-linecap: round;
    stroke-dasharray: 6 10;
    animation: edge-travel 6s linear infinite;
    animation-delay: var(--edge-d);
    filter: url(#edge-blur);
  }

  .graph-edges line:nth-child(odd) {
    stroke: rgba(255, 107, 53, 0.24);
    animation-duration: 8s;
    stroke-dasharray: 4 12;
  }

  .graph-edges line:nth-child(3n) {
    stroke: rgba(255, 255, 255, 0.09);
    animation-duration: 10s;
  }

  .halo {
    opacity: 0.28;
    animation: halo-breathe 5s ease-in-out infinite;
    animation-delay: var(--d);
  }

  .node {
    animation: node-pulse 4s ease-in-out infinite;
    animation-delay: var(--d);
  }

  .node-coral {
    fill: var(--brand);
  }

  .node-violet {
    fill: #7c3aed;
  }

  .hero-scanlines {
    position: absolute;
    inset: 0;
    z-index: 1;
    background:
      linear-gradient(180deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0)),
      repeating-linear-gradient(
        0deg,
        transparent 0px,
        transparent 2px,
        rgba(0, 0, 0, 0.03) 2px,
        rgba(0, 0, 0, 0.03) 4px
      );
    pointer-events: none;
  }

  .hero-content {
    position: relative;
    z-index: 2;
    max-width: 52rem;
    padding: clamp(1.5rem, 3vw, 2.5rem);
    margin-top: clamp(8.5rem, 20vw, 14rem);
  }

  .hero-heading {
    font-size: clamp(2.25rem, 6.4vw, 5rem);
    text-wrap: balance;
    text-shadow: 0 8px 24px rgba(0, 0, 0, 0.45);
  }

  .hero-content code {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
    border-radius: 0.35rem;
    padding: 0.1rem 0.35rem;
    background: rgba(124, 58, 237, 0.18);
    border: 1px solid rgba(124, 58, 237, 0.4);
    color: #d8c7ff;
    font-size: 0.9em;
  }

  .step-card {
    border-radius: 0.75rem;
    border: 1px solid rgba(255, 255, 255, 0.1);
    background:
      linear-gradient(165deg, rgba(255, 255, 255, 0.04), rgba(255, 255, 255, 0.01)),
      rgba(17, 23, 34, 0.9);
    padding: 1rem;
    box-shadow: 0 18px 36px -28px rgba(0, 0, 0, 0.8);
  }

  .note-card {
    border-radius: 0.5rem;
    background: rgba(27, 34, 48, 0.55);
    padding: 0.75rem 1rem;
    border: 1px solid rgba(255, 255, 255, 0.12);
    border-left-width: 2px;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.06);
  }

  .note-card-brand {
    border-left-color: var(--brand);
  }

  .note-card-violet {
    border-left-color: #8b5cf6;
  }

  .typing-cursor {
    display: inline-block;
    width: 8px;
    height: 1.15em;
    background: var(--brand);
    margin-left: 3px;
    vertical-align: text-bottom;
    border-radius: 1px;
    animation: blink 1.1s step-end infinite;
  }

  .demo-arrow {
    animation: arrow-pulse 2.5s ease-in-out infinite;
  }

  .reclaw-callout {
    box-shadow:
      0 24px 48px -30px rgba(255, 107, 53, 0.55),
      inset 0 1px 0 rgba(255, 255, 255, 0.08);
  }

  @keyframes edge-travel {
    from {
      stroke-dashoffset: 0;
    }
    to {
      stroke-dashoffset: -48;
    }
  }

  @keyframes node-pulse {
    0%,
    100% {
      opacity: 0.62;
      r: inherit;
    }
    50% {
      opacity: 1;
    }
  }

  @keyframes halo-breathe {
    0%,
    100% {
      opacity: 0.14;
      transform: scale(0.8);
    }
    50% {
      opacity: 0.36;
      transform: scale(1.2);
    }
  }

  @keyframes blink {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0;
    }
  }

  @keyframes arrow-pulse {
    0%,
    100% {
      opacity: 0.4;
    }
    50% {
      opacity: 1;
    }
  }

  @media (max-width: 768px) {
    .hero-shell {
      min-height: 28rem;
    }

    .hero-content {
      margin-top: 7.75rem;
      padding: 1.1rem;
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .graph-edges line,
    .graph-nodes .node,
    .halo,
    .typing-cursor,
    .demo-arrow {
      animation: none !important;
    }

    .typing-cursor {
      opacity: 1;
    }

    .demo-arrow {
      opacity: 0.75;
    }
  }
</style>
